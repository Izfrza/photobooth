<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadhan Photobooth - Modern & Estetik</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Amiri:wght@400;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0E7C5F;
            --primary-light: #2D936C;
            --primary-lighter: #4CAF8E;
            --secondary: #E6B325;
            --secondary-dark: #D49C1F;
            --accent: #8A6DF1;
            --accent-light: #A08DF4;
            --dark: #0F1B2E;
            --darker: #0A1423;
            --light: #F8F9FA;
            --light-gray: #E9ECEF;
            --gray: #6C757D;
            --gradient-primary: linear-gradient(135deg, #0E7C5F 0%, #2D936C 50%, #4CAF8E 100%);
            --gradient-gold: linear-gradient(135deg, #E6B325 0%, #FFD166 100%);
            --gradient-purple: linear-gradient(135deg, #8A6DF1 0%, #A08DF4 100%);
            --shadow-sm: 0 5px 15px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.2);
            --shadow-glow: 0 0 25px rgba(45, 147, 108, 0.3);
            --radius-sm: 12px;
            --radius-md: 18px;
            --radius-lg: 24px;
            --radius-xl: 30px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0A1423 0%, #0F1B2E 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(14, 124, 95, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(138, 109, 241, 0.08) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, rgba(230, 179, 37, 0.05) 0%, transparent 60%);
            z-index: -1;
        }
        
        /* Background patterns */
        .background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: -1;
            background-image: 
                radial-gradient(circle at 25% 25%, var(--light) 1px, transparent 1px),
                radial-gradient(circle at 75% 75%, var(--light) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        /* Decorative elements */
        .decoration {
            position: fixed;
            z-index: -1;
            opacity: 0.1;
        }
        
        .decoration-1 {
            top: 10%;
            left: 5%;
            width: 200px;
            height: 200px;
            background: var(--gradient-primary);
            border-radius: 50%;
            filter: blur(60px);
        }
        
        .decoration-2 {
            bottom: 10%;
            right: 5%;
            width: 300px;
            height: 300px;
            background: var(--gradient-gold);
            border-radius: 50%;
            filter: blur(80px);
        }
        
        /* Main container */
        .container-main {
            max-width: 1600px;
            background: rgba(15, 27, 46, 0.85);
            backdrop-filter: blur(15px);
            border-radius: var(--radius-xl);
            padding: 40px;
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        .container-main::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-primary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
            position: relative;
        }
        
        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: -0.5px;
            position: relative;
            display: inline-block;
            padding-bottom: 20px;
        }
        
        .header h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .header p {
            color: #B0B7C3;
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.7;
            font-weight: 300;
        }
        
        .header-decoration {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .header-decoration span {
            font-size: 2.2rem;
            color: var(--secondary);
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }
        
        .header-decoration span:nth-child(odd) {
            animation-delay: 0.5s;
        }
        
        .header-decoration span:nth-child(3n) {
            animation-delay: 1s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0); }
            33% { transform: translateY(-15px) rotate(5deg); }
            66% { transform: translateY(-8px) rotate(-5deg); }
        }
        
        /* Layout */
        .row {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .col-lg-8, .col-lg-4 {
            flex: 1;
            min-width: 300px;
        }
        
        /* Video Preview */
        .video-container {
            position: relative;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
            border: 2px solid rgba(45, 147, 108, 0.3);
            transition: var(--transition);
            background: #000;
        }
        
        .video-container:hover {
            border-color: var(--primary);
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg), 0 15px 40px rgba(14, 124, 95, 0.3);
        }
        
        video {
            width: 100%;
            display: block;
            transform: scaleX(-1);
            border-radius: calc(var(--radius-lg) - 2px);
        }
        
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            pointer-events: none;
            z-index: 2;
        }
        
        .camera-indicator {
            align-self: flex-end;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 8px 15px;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(5px);
        }
        
        .camera-controls {
            display: flex;
            gap: 10px;
            position: absolute;
            bottom: 20px;
            left: 20px;
            z-index: 3;
        }
        
        .camera-switch-btn {
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(5px);
        }
        
        .camera-switch-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
        }
        
        .timer-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 27, 46, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10;
            border-radius: var(--radius-lg);
        }
        
        .timer {
            font-size: 9rem;
            font-weight: 800;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            font-family: 'Poppins', sans-serif;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        /* Controls */
        .controls {
            background: linear-gradient(145deg, rgba(25, 40, 65, 0.9), rgba(20, 32, 52, 0.9));
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: var(--shadow-md);
        }
        
        .control-group {
            margin-bottom: 30px;
        }
        
        .control-group label {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--light-gray);
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .control-group label i {
            color: var(--primary-lighter);
            font-size: 1.2rem;
        }
        
        .timer-input {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .timer-input input {
            width: 100px;
            background: rgba(255, 255, 255, 0.07);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: var(--radius-sm);
            padding: 14px 18px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .timer-input input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 3px rgba(14, 124, 95, 0.2);
        }
        
        .timer-input span {
            color: #B0B7C3;
            font-size: 1rem;
            flex: 1;
        }
        
        .btn-capture {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: 20px 35px;
            font-size: 1.3rem;
            font-weight: 700;
            width: 100%;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(14, 124, 95, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .btn-capture::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .btn-capture:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(14, 124, 95, 0.5);
        }
        
        .btn-capture:hover::before {
            left: 100%;
        }
        
        .btn-capture:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 5px 15px rgba(14, 124, 95, 0.3);
        }
        
        .btn-group {
            display: flex;
            gap: 20px;
            margin-top: 25px;
        }
        
        .btn-group button {
            flex: 1;
            padding: 18px;
            border-radius: var(--radius-md);
            border: none;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .btn-group button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.4s;
        }
        
        .btn-group button:hover::before {
            transform: translateX(0);
        }
        
        .btn-clear {
            background: rgba(255, 107, 107, 0.15);
            color: #FF9A9A;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .btn-clear:hover {
            background: rgba(255, 107, 107, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.2);
        }
        
        .btn-download {
            background: rgba(45, 147, 108, 0.15);
            color: #7BE0C3;
            border: 1px solid rgba(45, 147, 108, 0.3);
        }
        
        .btn-download:hover {
            background: rgba(45, 147, 108, 0.25);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(45, 147, 108, 0.2);
        }
        
        /* Filter Select */
        .filter-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .filter-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .filter-option:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            background: rgba(45, 147, 108, 0.1);
        }
        
        .filter-option.active {
            border-color: var(--primary);
            background: rgba(45, 147, 108, 0.15);
            box-shadow: 0 5px 15px rgba(45, 147, 108, 0.2);
        }
        
        .filter-icon {
            font-size: 1.8rem;
            color: var(--primary-lighter);
        }
        
        .filter-name {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--light-gray);
        }
        
        /* Strip Selection */
        .strip-selection {
            background: linear-gradient(145deg, rgba(25, 40, 65, 0.9), rgba(20, 32, 52, 0.9));
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: var(--shadow-md);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            color: var(--secondary);
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .section-title i {
            font-size: 1.8rem;
        }
        
        .strip-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 20px;
        }
        
        .strip-option {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            aspect-ratio: 2/3;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: var(--shadow-sm);
        }
        
        .strip-option:hover {
            transform: translateY(-8px) scale(1.03);
            border-color: rgba(45, 147, 108, 0.5);
            box-shadow: var(--shadow-md);
        }
        
        .strip-option.active {
            border-color: var(--primary);
            box-shadow: 0 10px 25px rgba(45, 147, 108, 0.3);
            transform: translateY(-5px);
        }
        
        .strip-option::after {
            content: attr(title);
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px;
            background: rgba(15, 27, 46, 0.9);
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .strip-option:hover::after {
            transform: translateY(0);
        }
        
        .strip-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Photo Strip Result - DIKEMBALIKAN ke 4 foto dengan ukuran lebih kecil */
        .result-section {
            background: linear-gradient(145deg, rgba(25, 40, 65, 0.9), rgba(20, 32, 52, 0.9));
            border-radius: var(--radius-lg);
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: var(--shadow-md);
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .result-section h3 {
            color: var(--secondary);
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        #photoStrip {
            width: 380px; /* Lebar tetap */
            height: 1000px; /* Tinggi dikurangi dari 1140px ke 1000px */
            position: relative;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            margin: 0 auto;
            overflow: hidden;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            border: 3px solid rgba(255, 255, 255, 0.1);
            display: none;
            flex-shrink: 0;
        }
        
        /* UKURAN FOTO DIPERKECIL */
        .captured-photo {
            position: absolute;
            width: 300px; /* DIPERKECIL dari 330px */
            height: 180px; /* DIPERKECIL dari 210px */
            left: 40px; /* Disesuaikan agar tetap di tengah */
            object-fit: cover;
            border-radius: 8px;
            transform: scaleX(-1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Posisi Vertikal untuk 4 Slot Foto - DIPERKECIL jaraknya */
        .pos-0 { top: 90px; }
        .pos-1 { top: 300px; }
        .pos-2 { top: 510px; }
        .pos-3 { top: 720px; }
        
        /* Preview Strip */
        .strip-preview-container {
            margin-top: auto;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .strip-preview {
            width: 190px;
            height: 500px; /* Disesuaikan proporsional */
            margin: 20px auto;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            border-radius: var(--radius-sm);
            border: 3px solid var(--primary);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .selected-strip-name {
            background: rgba(45, 147, 108, 0.15);
            color: var(--primary-lighter);
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 15px;
            display: inline-block;
            border: 1px solid rgba(45, 147, 108, 0.3);
        }
        
        /* Photo counter - DIKEMBALIKAN ke 4 foto */
        .photo-counter {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .photo-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: var(--transition);
        }
        
        .photo-dot.active {
            background: var(--primary);
            transform: scale(1.3);
        }
        
        /* Responsive Design */
        @media (max-width: 1599px) {
            .container-main {
                max-width: 95%;
            }
        }
        
        @media (max-width: 1399px) {
            .header h1 {
                font-size: 3rem;
            }
            
            #photoStrip {
                width: 350px;
                height: 920px; /* Disesuaikan */
            }
            
            .captured-photo {
                width: 270px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
        }
        
        @media (max-width: 1199px) {
            .container-main {
                padding: 30px;
            }
            
            .header h1 {
                font-size: 2.7rem;
            }
            
            .strip-grid, .filter-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            #photoStrip {
                width: 330px;
                height: 868px; /* Disesuaikan */
            }
            
            .captured-photo {
                width: 250px; /* DIPERKECIL */
                height: 165px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
        }
        
        @media (max-width: 991px) {
            .col-lg-8, .col-lg-4 {
                flex: 100%;
            }
            
            .header h1 {
                font-size: 2.4rem;
            }
            
            .header p {
                font-size: 1.1rem;
            }
            
            .timer {
                font-size: 7rem;
            }
            
            .btn-capture {
                padding: 18px 25px;
                font-size: 1.2rem;
            }
            
            .strip-grid, .filter-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            #photoStrip {
                width: 320px;
                height: 842px; /* Disesuaikan */
                margin: 20px auto;
            }
            
            .captured-photo {
                width: 240px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
        }
        
        @media (max-width: 767px) {
            body {
                padding: 15px;
            }
            
            .container-main {
                padding: 25px 20px;
                border-radius: var(--radius-lg);
            }
            
            .header h1 {
                font-size: 2.1rem;
                padding-bottom: 15px;
            }
            
            .header h1::after {
                width: 120px;
            }
            
            .header p {
                font-size: 1rem;
            }
            
            .header-decoration span {
                font-size: 1.8rem;
            }
            
            .timer {
                font-size: 6rem;
            }
            
            .controls, .strip-selection, .result-section, .filter-section {
                padding: 25px 20px;
            }
            
            .btn-capture {
                padding: 16px 20px;
                font-size: 1.1rem;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .strip-grid, .filter-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }
            
            #photoStrip {
                width: 300px;
                height: 790px; /* Disesuaikan */
            }
            
            .captured-photo {
                width: 220px; /* DIPERKECIL */
                height: 150px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
        }
        
        @media (max-width: 575px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .timer-input {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .timer-input input {
                width: 100%;
                max-width: 120px;
            }
            
            .strip-grid, .filter-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            #photoStrip {
                width: 280px;
                height: 737px; /* Disesuaikan */
            }
            
            .captured-photo {
                width: 200px; /* DIPERKECIL */
                height: 140px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
            
            .strip-preview {
                width: 140px;
                height: 368px; /* Disesuaikan */
            }
        }
        
        @media (max-width: 400px) {
            .header h1 {
                font-size: 1.6rem;
            }
            
            #photoStrip {
                width: 260px;
                height: 684px; /* Disesuaikan */
            }
            
            .captured-photo {
                width: 180px; /* DIPERKECIL */
                height: 130px; /* DIPERKECIL */
                left: 40px; /* Disesuaikan */
            }
            
            /* Posisi untuk 4 foto di layar kecil - DIPERKECIL jaraknya */
            .pos-0 { top: 80px; }
            .pos-1 { top: 250px; }
            .pos-2 { top: 420px; }
            .pos-3 { top: 590px; }
        }
        
        /* Animation untuk foto baru */
        @keyframes photoAppear {
            0% { opacity: 0; transform: scaleX(-1) scale(0.7); }
            70% { opacity: 1; transform: scaleX(-1) scale(1.05); }
            100% { opacity: 1; transform: scaleX(-1) scale(1); }
        }
        
        .photo-appear {
            animation: photoAppear 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        /* Loading indicator */
        .loading {
            display: inline-block;
            width: 22px;
            height: 22px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Status indicators */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .status-camera {
            background: rgba(45, 147, 108, 0.15);
            color: var(--primary-lighter);
            border: 1px solid rgba(45, 147, 108, 0.3);
        }
        
        .status-processing {
            background: rgba(230, 179, 37, 0.15);
            color: var(--secondary);
            border: 1px solid rgba(230, 179, 37, 0.3);
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            padding: 18px 25px;
            border-radius: var(--radius-md);
            color: white;
            font-weight: 600;
            z-index: 9999;
            box-shadow: var(--shadow-lg);
            animation: slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            max-width: 350px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification-success {
            background: linear-gradient(135deg, rgba(14, 124, 95, 0.95), rgba(45, 147, 108, 0.95));
        }
        
        .notification-error {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.95), rgba(255, 107, 107, 0.95));
        }
        
        .notification-info {
            background: linear-gradient(135deg, rgba(13, 110, 253, 0.95), rgba(41, 143, 255, 0.95));
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* Scrollbar customization */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(15, 27, 46, 0.5);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }
    </style>
</head>
<body>
    <!-- Background elements -->
    <div class="background-pattern"></div>
    <div class="decoration decoration-1"></div>
    <div class="decoration decoration-2"></div>
    
    <div class="container-main">
        <div class="header">
            <h1><i class="fas fa-moon"></i> Ramadhan Photobooth <i class="fas fa-star"></i></h1>
            <p>Abadikan momen spesial Ramadhan Anda dengan photobooth estetik. Pilih bingkai favorit, ambil 4 foto, dan download hasilnya.</p>
            <div class="header-decoration">
                <span>ðŸŒ™</span>
                <span>ðŸ•Œ</span>
                <span>ðŸ“¿</span>
                <span>ðŸŒŸ</span>
                <span>ðŸ“¸</span>
                <span>âœ¨</span>
                <span>ðŸŒ¿</span>
            </div>
        </div>
        
        <div class="status-indicator status-camera" id="cameraStatus">
            <i class="fas fa-circle"></i> <span>Kamera siap digunakan</span>
        </div>
        
        <div class="row">
            <div class="col-lg-8">
                <div class="video-container">
                    <div class="video-overlay">
                        <div class="camera-indicator">
                            <i class="fas fa-video"></i> <span id="cameraTypeLabel">Kamera Depan</span>
                        </div>
                    </div>
                    <div class="camera-controls">
                        <button class="camera-switch-btn" id="switchCamera" title="Ganti Kamera">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="timer-overlay" id="timerOverlay">
                        <div class="timer" id="timer">3</div>
                    </div>
                    <video id="video" autoplay playsinline></video>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label><i class="fas fa-clock"></i> Timer Countdown</label>
                        <div class="timer-input">
                            <input type="number" id="timerValue" min="1" max="10" value="3" class="form-control">
                            <span>detik persiapan sebelum setiap foto diambil</span>
                        </div>
                    </div>
                    
                    <button class="btn-capture" id="capture">
                        <i class="fas fa-camera"></i> AMBIL 4 FOTO OTOMATIS
                    </button>
                    
                    <!-- DIKEMBALIKAN ke 4 photo dots -->
                    <div class="photo-counter" id="photoCounter">
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn-clear d-none" id="clear">
                            <i class="fas fa-redo"></i> ULANGI SESI
                        </button>
                        <button class="btn-download d-none" id="download">
                            <i class="fas fa-download"></i> DOWNLOAD HASIL
                        </button>
                    </div>
                </div>
                
                <div class="filter-section">
                    <div class="section-title">
                        <i class="fas fa-sliders-h"></i> Filter & Efek
                    </div>
                    <div class="filter-grid" id="filterOptions">
                        <div class="filter-option active" data-filter="none">
                            <div class="filter-icon"><i class="fas fa-sun"></i></div>
                            <div class="filter-name">Normal</div>
                        </div>
                        <div class="filter-option" data-filter="grayscale(100%)">
                            <div class="filter-icon"><i class="fas fa-moon"></i></div>
                            <div class="filter-name">Classic B&W</div>
                        </div>
                        <div class="filter-option" data-filter="sepia(100%)">
                            <div class="filter-icon"><i class="fas fa-history"></i></div>
                            <div class="filter-name">Vintage</div>
                        </div>
                        <div class="filter-option" data-filter="contrast(150%)">
                            <div class="filter-icon"><i class="fas fa-adjust"></i></div>
                            <div class="filter-name">Kontras Tinggi</div>
                        </div>
                        <div class="filter-option" data-filter="hue-rotate(90deg)">
                            <div class="filter-icon"><i class="fas fa-leaf"></i></div>
                            <div class="filter-name">Tema Hijau</div>
                        </div>
                        <div class="filter-option" data-filter="saturate(2)">
                            <div class="filter-icon"><i class="fas fa-palette"></i></div>
                            <div class="filter-name">Warna Cerah</div>
                        </div>
                        <div class="filter-option" data-filter="brightness(1.2) contrast(1.1)">
                            <div class="filter-icon"><i class="fas fa-sun"></i></div>
                            <div class="filter-name">Cerah</div>
                        </div>
                        <div class="filter-option" data-filter="invert(1)">
                            <div class="filter-icon"><i class="fas fa-ghost"></i></div>
                            <div class="filter-name">Invert</div>
                        </div>
                        <div class="filter-option" data-filter="blur(2px)">
                            <div class="filter-icon"><i class="fas fa-cloud"></i></div>
                            <div class="filter-name">Soft Focus</div>
                        </div>
                        <div class="filter-option" data-filter="opacity(0.8)">
                            <div class="filter-icon"><i class="fas fa-tint"></i></div>
                            <div class="filter-name">Transparan</div>
                        </div>
                    </div>
                </div>
                
                <div class="strip-selection">
                    <div class="section-title">
                        <i class="fas fa-images"></i> Pilih Bingkai Ramadhan
                    </div>
                    <div class="strip-grid" id="stripOptions">
                        <!-- Strip options akan diisi oleh JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="result-section">
                    <h3><i class="fas fa-image"></i> Hasil Fotostrip</h3>
                    <div id="photoStrip"></div>
                    
                    <!-- DIKEMBALIKAN ke 4 result dots -->
                    <div class="photo-counter" id="resultCounter" style="margin-top: 20px; display: none;">
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                        <div class="photo-dot"></div>
                    </div>
                    
                    <div class="strip-preview-container">
                        <p style="color: #B0B7C3; margin-bottom: 10px;">Bingkai terpilih:</p>
                        <div class="strip-preview" id="stripPreview"></div>
                        <div class="selected-strip-name" id="selectedStripName">Ramadhan Elegant</div>
                        <p style="color: #6C757D; font-size: 0.9rem; margin-top: 15px;">Foto akan muncul di area transparan bingkai</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); color: #6C757D; font-size: 0.9rem;">
            <p>Â© 2026 Ramadhan Photobooth | Dibuat oleh bagian dokumentasi untuk bulan suci Ramadhan</p>
        </div>
    </div>

    <script>
        // Elemen DOM
        const video = document.getElementById('video');
        const captureBtn = document.getElementById('capture');
        const downloadBtn = document.getElementById('download');
        const clearBtn = document.getElementById('clear');
        const timerInput = document.getElementById('timerValue');
        const photoStrip = document.getElementById('photoStrip');
        const timerDisplay = document.getElementById('timer');
        const timerOverlay = document.getElementById('timerOverlay');
        const stripOptions = document.getElementById('stripOptions');
        const stripPreview = document.getElementById('stripPreview');
        const selectedStripName = document.getElementById('selectedStripName');
        const filterOptions = document.getElementById('filterOptions');
        const photoCounter = document.getElementById('photoCounter');
        const resultCounter = document.getElementById('resultCounter');
        const cameraStatus = document.getElementById('cameraStatus');
        const switchCameraBtn = document.getElementById('switchCamera');
        const cameraTypeLabel = document.getElementById('cameraTypeLabel');
        
        // DIKEMBALIKAN ke 4 photo dots
        const photoDots = photoCounter.querySelectorAll('.photo-dot');
        const resultDots = resultCounter.querySelectorAll('.photo-dot');
        
        // Daftar strip tema Ramadhan
        const strips = [
            { 
                id: 1, 
                name: "Ramadhan Elegant", 
                url: "Dark Blue and White Elegant Festive Grand Opening Photo Studio Photostrip.png",
                previewColor: "#2D936C"
            },
            { 
                id: 2, 
                name: "Masjid Minimalis", 
                url: "https://images.unsplash.com/photo-1562774053-701939374585?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#4A6572"
            },
            { 
                id: 3, 
                name: "Gradient Hijau", 
                url: "https://images.unsplash.com/photo-1617347454431-f49d7ff5c3b1?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#2D936C"
            },
            { 
                id: 4, 
                name: "Bulan dan Bintang", 
                url: "https://images.unsplash.com/photo-1519681393784-d120267933ba?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#E6B325"
            },
            { 
                id: 5, 
                name: "Kaligrafi Emas", 
                url: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#E6B325"
            },
            { 
                id: 6, 
                name: "Geometric Islamic", 
                url: "https://images.unsplash.com/photo-1548013146-72479768bada?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#8A6DF1"
            },
            { 
                id: 7, 
                name: "Night Sky", 
                url: "https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#0F1B2E"
            },
            { 
                id: 8, 
                name: "Floral Pattern", 
                url: "https://images.unsplash.com/photo-1560780552-ba54683cb263?w=380&h=1000&fit=crop&crop=center&q=80",
                previewColor: "#4CAF8E"
            }
        ];
        
        let selectedStrip = strips[0];
        let selectedFilter = "none";
        let isCapturing = false;
        let currentPhotoIndex = 0;
        let currentStream = null;
        let currentFacingMode = 'user'; // 'user' = depan, 'environment' = belakang

        // Inisialisasi kamera dengan facing mode tertentu
        async function initCamera(facingMode = 'user') {
            try {
                // Hentikan stream yang sedang berjalan
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }
                
                const constraints = {
                    video: { 
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: facingMode,
                        frameRate: { ideal: 30 }
                    } 
                };
                
                const stream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = stream;
                currentStream = stream;
                currentFacingMode = facingMode;
                
                // Update label kamera
                cameraTypeLabel.textContent = facingMode === 'user' ? 'Kamera Depan' : 'Kamera Belakang';
                
                // Update status kamera
                cameraStatus.innerHTML = '<i class="fas fa-check-circle"></i> <span>Kamera siap digunakan</span>';
                cameraStatus.classList.add('status-camera');
                
                console.log(`Kamera ${facingMode === 'user' ? 'depan' : 'belakang'} berhasil diakses`);
                return true;
            } catch (error) {
                console.error("Error mengakses kamera: ", error);
                
                // Update status kamera
                cameraStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>Kamera tidak tersedia</span>';
                cameraStatus.classList.remove('status-camera');
                cameraStatus.classList.add('status-processing');
                
                // Fallback menggunakan gambar placeholder
                video.style.background = "#1a1a1a";
                video.innerHTML = `
                    <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#aaa;padding:20px;">
                        <i class="fas fa-camera-slash fa-4x" style="margin-bottom:20px;"></i>
                        <h4 style="margin-bottom:10px;">Kamera Tidak Tersedia</h4>
                        <p style="text-align:center;max-width:400px;">Izinkan akses kamera atau pastikan kamera tidak sedang digunakan oleh aplikasi lain.</p>
                        <button class="btn-capture" onclick="initCamera('user')" style="margin-top:20px;width:auto;">
                            <i class="fas fa-redo"></i> Coba Lagi
                        </button>
                    </div>
                `;
                
                return false;
            }
        }

        // Fungsi untuk mengganti kamera
        function switchCamera() {
            if (isCapturing) {
                showNotification('Tidak dapat mengganti kamera saat sedang mengambil foto', 'error');
                return;
            }
            
            const newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
            initCamera(newFacingMode);
        }

        // Buat pilihan strip
        function createStripOptions() {
            stripOptions.innerHTML = '';
            
            strips.forEach(strip => {
                const stripOption = document.createElement('div');
                stripOption.className = 'strip-option';
                stripOption.dataset.id = strip.id;
                stripOption.title = strip.name;
                
                // Buat preview strip
                const stripImg = document.createElement('img');
                stripImg.src = strip.url;
                stripImg.alt = strip.name;
                stripImg.loading = "lazy";
                
                // Fallback jika gambar gagal load
                stripImg.onerror = function() {
                    this.onerror = null;
                    this.src = `https://placehold.co/140x210/${strip.previewColor.replace('#', '')}/white?text=${encodeURIComponent(strip.name.substring(0, 12))}`;
                };
                
                stripOption.appendChild(stripImg);
                stripOptions.appendChild(stripOption);
                
                // Set strip pertama sebagai aktif
                if (strip.id === selectedStrip.id) {
                    stripOption.classList.add('active');
                    updateStripPreview();
                }
                
                // Event listener untuk memilih strip
                stripOption.addEventListener('click', () => {
                    if (isCapturing) return;
                    
                    // Hapus kelas aktif dari semua strip
                    document.querySelectorAll('.strip-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    // Tambah kelas aktif ke strip yang dipilih
                    stripOption.classList.add('active');
                    
                    // Set strip yang dipilih
                    selectedStrip = strip;
                    
                    // Update preview
                    updateStripPreview();
                    
                    // Update photostrip jika sudah ada foto
                    if (photoStrip.style.display === 'block') {
                        updatePhotoStripBackground();
                    }
                });
            });
        }

        // Setup filter options
        function setupFilterOptions() {
            filterOptions.querySelectorAll('.filter-option').forEach(option => {
                option.addEventListener('click', () => {
                    if (isCapturing) return;
                    
                    // Hapus kelas aktif dari semua filter
                    filterOptions.querySelectorAll('.filter-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    
                    // Tambah kelas aktif ke filter yang dipilih
                    option.classList.add('active');
                    
                    // Terapkan filter ke video
                    selectedFilter = option.dataset.filter;
                    video.style.filter = selectedFilter;
                });
            });
        }

        // Update preview strip
        function updateStripPreview() {
            stripPreview.style.backgroundImage = `url('${selectedStrip.url}')`;
            selectedStripName.textContent = selectedStrip.name;
        }

        // Update background strip foto
        function updatePhotoStripBackground() {
            photoStrip.style.backgroundImage = `url('${selectedStrip.url}')`;
        }

        // Update photo counter
        function updatePhotoCounter(index) {
            photoDots.forEach((dot, i) => {
                if (i <= index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            resultDots.forEach((dot, i) => {
                if (i <= index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Proses Ambil Foto - DIKEMBALIKAN ke 4 foto
        captureBtn.addEventListener('click', async () => {
            if (isCapturing) return;
            
            if (!video.srcObject && !video.innerHTML.includes('camera-slash')) {
                showNotification('Kamera belum siap. Silakan izinkan akses kamera.', 'error');
                return;
            }
            
            isCapturing = true;
            currentPhotoIndex = 0;
            captureBtn.disabled = true;
            captureBtn.innerHTML = '<div class="loading"></div> Mempersiapkan...';
            photoStrip.innerHTML = '';
            
            // Reset photo counter
            updatePhotoCounter(-1);
            resultCounter.style.display = 'flex';
            
            // Set background dengan strip yang dipilih
            updatePhotoStripBackground();
            photoStrip.style.display = 'block';
            
            // Update status
            cameraStatus.innerHTML = '<i class="fas fa-camera"></i> <span>Sedang mengambil foto...</span>';
            cameraStatus.classList.remove('status-camera');
            cameraStatus.classList.add('status-processing');
            
            // Ambil 4 foto (DIKEMBALIKAN ke 4)
            for (let i = 0; i < 4; i++) {
                currentPhotoIndex = i;
                updatePhotoCounter(i);
                
                // Countdown
                timerOverlay.style.display = 'flex';
                for (let j = parseInt(timerInput.value); j > 0; j--) {
                    timerDisplay.innerText = j;
                    await delay(1000);
                }
                
                timerDisplay.innerText = 'ðŸ“¸';
                await takeSnap(i);
                await delay(500);
                timerDisplay.innerText = '';
                timerOverlay.style.display = 'none';
                
                // Jeda antar foto
                if (i < 3) {
                    await delay(800);
                }
            }

            isCapturing = false;
            currentPhotoIndex = 3;
            captureBtn.disabled = false;
            captureBtn.innerHTML = '<i class="fas fa-camera"></i> AMBIL 4 FOTO OTOMATIS';
            downloadBtn.classList.remove('d-none');
            clearBtn.classList.remove('d-none');
            
            // Update status
            cameraStatus.innerHTML = '<i class="fas fa-check-circle"></i> <span>Kamera siap digunakan</span>';
            cameraStatus.classList.remove('status-processing');
            cameraStatus.classList.add('status-camera');
            
            // Scroll ke hasil
            photoStrip.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // Tampilkan notifikasi sukses - DIKEMBALIKAN teksnya
            showNotification('4 foto berhasil diambil! Silakan download hasilnya.', 'success');
        });

        // Fungsi bantuan delay
        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Ambil foto
        function takeSnap(index) {
            return new Promise((resolve) => {
                // Buat canvas untuk menangkap foto
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Atur ukuran canvas sesuai video
                canvas.width = video.videoWidth || 640;
                canvas.height = video.videoHeight || 480;
                
                // Terapkan filter yang sama seperti di video
                ctx.filter = selectedFilter;
                
                // Jika kamera depan, gambar dibalik (mirror effect)
                if (currentFacingMode === 'user') {
                    ctx.scale(-1, 1);
                    ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
                } else {
                    // Jika kamera belakang, tidak perlu dibalik
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                }
                
                // Buat elemen gambar untuk foto
                const img = document.createElement('img');
                img.src = canvas.toDataURL('image/png');
                img.classList.add('captured-photo', `pos-${index}`, 'photo-appear');
                img.alt = `Foto ${index + 1}`;
                
                // Jika kamera belakang, tidak perlu dibalik di foto
                if (currentFacingMode === 'environment') {
                    img.style.transform = 'scaleX(1)';
                }
                
                // Tambahkan ke photo strip
                photoStrip.appendChild(img);
                
                resolve();
            });
        }

        // Fungsi Download
        downloadBtn.addEventListener('click', () => {
            // Tampilkan loading di tombol download
            const originalText = downloadBtn.innerHTML;
            downloadBtn.innerHTML = '<div class="loading"></div> Membuat hasil...';
            downloadBtn.disabled = true;
            
            // Gunakan html2canvas untuk menangkap strip dengan foto
            html2canvas(photoStrip, {
                backgroundColor: null,
                scale: 3,
                useCORS: true,
                allowTaint: true,
                logging: false,
                onclone: (clonedDoc) => {
                    // Pastikan filter diterapkan pada clone
                    const clonedVideo = clonedDoc.querySelector('#video');
                    if (clonedVideo) {
                        clonedVideo.style.filter = selectedFilter;
                    }
                }
            }).then(canvas => {
                // Buat link download
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = `Ramadhan_Photobooth_${selectedStrip.name.replace(/\s+/g, '_')}_${new Date().getTime()}.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                // Kembalikan tombol ke keadaan semula
                downloadBtn.innerHTML = originalText;
                downloadBtn.disabled = false;
                
                // Tampilkan notifikasi sukses
                showNotification('Hasil berhasil didownload!', 'success');
            }).catch(error => {
                console.error('Error generating image:', error);
                downloadBtn.innerHTML = originalText;
                downloadBtn.disabled = false;
                showNotification('Gagal membuat gambar. Coba lagi.', 'error');
            });
        });

        // Fungsi Clear
        clearBtn.addEventListener('click', () => {
            photoStrip.innerHTML = '';
            photoStrip.style.display = 'none';
            clearBtn.classList.add('d-none');
            downloadBtn.classList.add('d-none');
            resultCounter.style.display = 'none';
            
            // Reset photo counter
            updatePhotoCounter(-1);
            
            // Scroll kembali ke atas
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Tampilkan notifikasi
            showNotification('Sesi foto telah direset.', 'info');
        });

        // Fungsi notifikasi
        function showNotification(message, type) {
            // Hapus notifikasi sebelumnya
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.style.animation = 'slideOutRight 0.3s forwards';
                setTimeout(() => existingNotification.remove(), 300);
            }
            
            // Buat elemen notifikasi
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            
            notification.innerHTML = `
                <i class="fas ${icon} fa-lg"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Hapus notifikasi setelah 4 detik
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s forwards';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 4000);
        }

        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', () => {
            initCamera('user');
            createStripOptions();
            setupFilterOptions();
            
            // Update preview strip saat halaman dimuat
            updateStripPreview();
            
            // Tambah event listener untuk tombol ganti kamera
            switchCameraBtn.addEventListener('click', switchCamera);
            
            // Tambah event listener untuk input timer
            timerInput.addEventListener('input', function() {
                if (this.value < 1) this.value = 1;
                if (this.value > 10) this.value = 10;
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === ' ' && !isCapturing) {
                    e.preventDefault();
                    captureBtn.click();
                }
                
                if (e.key === 'Escape' && !isCapturing) {
                    clearBtn.click();
                }
                
                // Shortcut untuk ganti kamera (Shift+C)
                if (e.key === 'C' && e.shiftKey && !isCapturing) {
                    switchCamera();
                }
            });
        });
    </script>
</body>
</html>
